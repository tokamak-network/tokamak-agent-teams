# {{GAME_NAME}} — 자율 에이전트 빌드 프로젝트

이 프로젝트는 **{{GAME_NAME}}** 게임을 HTML/JavaScript/Canvas로 구현합니다.
상세 사양은 `SPEC.md`를 참조하세요.

---

## 당신의 역할

당신은 여러 에이전트 중 하나입니다. 각 에이전트는 독립적으로 작업하며, git을 통해 코드를 공유합니다.
**중앙 오케스트레이터는 없습니다.** 이 문서를 읽고 스스로 다음 작업을 판단하세요.

---

## 작업 방식

### 1. 다음 작업 찾기 (우선순위 순)

아래 순서대로 확인하여 가장 우선순위 높은 작업을 수행하세요:

1. **실패하는 테스트 수정**: `bash tests/run-tests.sh`를 실행하여 실패하는 테스트가 있으면 즉시 수정
2. **미구현 기능**: `SPEC.md`를 읽고, `src/` 코드와 비교하여 아직 구현되지 않은 기능을 구현
3. **코드 품질 개선**: 명백한 버그, 성능 문제, 리팩토링 기회가 있으면 개선

### 2. 태스크 잠금 (충돌 방지)

작업을 시작하기 **전에** 반드시:

```bash
# 1. 다른 에이전트의 작업 확인
ls current_tasks/

# 2. 다른 에이전트가 작업 중인 파일/영역은 피함

# 3. 자신의 작업을 잠금 파일로 기록
echo "구현할 내용 요약" > current_tasks/agent-${AGENT_ID}-$(date +%s)
git add current_tasks/ && git commit -m "task: agent-${AGENT_ID} 작업 시작 - 구현할 내용" && git push origin main
```

**중요**: 같은 파일을 여러 에이전트가 동시에 수정하면 충돌이 발생합니다. 태스크 잠금을 반드시 지켜주세요.

### 3. 작업 수행

- **한 번에 하나의 작은 기능만** 구현하세요
- `src/` 파일 수정 시 관련 테스트도 반드시 확인하세요
- 모든 코드는 **순수 HTML/JS/Canvas**로 작성 (외부 라이브러리 사용 금지)
- `src/game.js`에 게임 로직, `src/renderer.js`에 렌더링, `src/input.js`에 입력 처리

### 4. 테스트 확인 & 커밋

```bash
# 테스트 실행
bash tests/run-tests.sh

# 테스트 통과 시에만 커밋
git add -A
git commit -m "feat: 구현한 기능 설명"

# 동기화 & 푸시
git pull --rebase origin main
git push origin main
```

**테스트가 실패하면 절대 push하지 마세요.** 실패한 테스트를 먼저 수정하세요.

### 5. 태스크 완료

```bash
# 자신의 태스크 파일을 완료 디렉토리로 이동
mv current_tasks/agent-${AGENT_ID}-* completed_tasks/
git add current_tasks/ completed_tasks/
git commit -m "task: agent-${AGENT_ID} 작업 완료"
git push origin main
```

---

## 절대 규칙

1. **다른 에이전트의 `current_tasks/` 파일을 삭제하지 마세요**
2. **테스트 실패 시 push 금지**
3. **한 번에 너무 큰 변경 금지** — 작은 커밋을 선호
4. **충돌 발생 시**: `git pull --rebase` 후 충돌 해결, 실패하면 `git rebase --abort` 후 재시도
5. **push 실패 시**: pull 후 재시도 (최대 3회)
6. **`logs/` 디렉토리**: 디버그 정보는 여기에 기록 (git에 커밋하지 않음)

---

## 파일 구조

```
src/
├── index.html    # 엔트리 포인트 (수정 최소화)
├── game.js       # 게임 로직 (보드, 규칙, 상태)
├── renderer.js   # Canvas 렌더링
└── input.js      # 키보드/입력 처리

tests/
├── run-tests.sh          # 테스트 러너
├── game-logic.test.js    # 게임 로직 단위 테스트
└── structure.test.js     # 구조/통합 테스트
```

---

## 작업 시작

위 절차에 따라 **지금 바로** 다음 작업을 찾아 수행하세요.
작업이 완료되면 자연스럽게 종료됩니다. 다음 루프에서 새 작업을 찾게 됩니다.
